<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Pet Memorial | Lap of Love</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <a href="/" class="logo">Lap of Love</a>
                <ul class="nav-menu">
                    <li>
                        <a href="#services">Services</a>
                        <div class="dropdown">
                            <div class="dropdown-section">
                                <div class="dropdown-title">In-Home Services</div>
                                <a href="#euthanasia">In-Home Euthanasia</a>
                                <a href="#quality-life">Quality of Life Consultation</a>
                                <a href="#telemedicine">Telemedicine</a>
                                <a href="#hospice">Pet Hospice Care</a>
                            </div>
                            <div class="dropdown-section">
                                <div class="dropdown-title">Aftercare</div>
                                <a href="#cremation">Pet Cremation</a>
                                <a href="#memorials">Pet Memorials</a>
                                <a href="#keepsakes">Memorial Keepsakes</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <a href="#resources">Resources</a>
                        <div class="dropdown">
                            <a href="#grief-support">Grief Support</a>
                            <a href="#rainbow-bridge">Rainbow Bridge</a>
                            <a href="#pet-loss">Pet Loss Resources</a>
                            <a href="#blog">Blog & Articles</a>
                            <a href="#faq">FAQ</a>
                            <a href="#costs">Service Costs</a>
                        </div>
                    </li>
                    <li>
                        <a href="#quality">Quality of Life</a>
                        <div class="dropdown">
                            <a href="#scale">Quality of Life Scale</a>
                            <a href="#assessment">Pet Assessment</a>
                            <a href="#pain-management">Pain Management</a>
                            <a href="#senior-care">Senior Pet Care</a>
                            <a href="#when-time">When It's Time</a>
                        </div>
                    </li>
                    <li>
                        <a href="#community">Community</a>
                        <div class="dropdown">
                            <a href="/">Pet Memorials</a>
                            <a href="/create">Create Memorial</a>
                            <a href="#stories">Pet Stories</a>
                            <a href="#support-groups">Support Groups</a>
                            <a href="#events">Community Events</a>
                            <a href="#newsletter">Newsletter</a>
                        </div>
                    </li>
                    <li>
                        <a href="#about">About Us</a>
                        <div class="dropdown">
                            <a href="#our-story">Our Story</a>
                            <a href="#team">Our Team</a>
                            <a href="#mission">Mission & Values</a>
                            <a href="#locations">Service Areas</a>
                            <a href="#reviews">Reviews</a>
                            <a href="#press">Press & Media</a>
                        </div>
                    </li>
                </ul>
                <div class="nav-buttons">
                    <a href="#schedule" class="nav-btn nav-btn-outline">Schedule</a>
                    <a href="#join" class="nav-btn nav-btn-outline">Join Our Team</a>
                    <a href="#find" class="nav-btn nav-btn-purple">Find a Vet</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Create Memorial Hero -->
    <section class="hero-section">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">Create a Pet Memorial</h1>
                <p class="hero-subtitle">
                    Create a lasting tribute to honor your beloved companion.<br>
                    Share their story, celebrate their life, and keep their memory alive forever.
                </p>
                <a href="/" class="hero-cta-btn secondary">‚Üê Back to Pet Memorials</a>
            </div>
        </div>
    </section>

    <!-- Create Memorial Section -->
    <section class="memorials-section">
        <div class="container">
            <div class="create-section">
                <div class="create-header" style="padding: 20px 40px;">
                    <h2 style="font-size: 24px; margin-bottom: 20px;">Memorial Details</h2>
                </div>

                <form id="memorialForm" class="create-form" enctype="multipart/form-data">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="petName" class="form-label">Pet's Name *</label>
                            <input type="text" id="petName" name="petName" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="ownerName" class="form-label">Your Name *</label>
                            <input type="text" id="ownerName" name="ownerName" class="form-input" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="birthDate" class="form-label">Birth Date</label>
                            <input type="date" id="birthDate" name="birthDate" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="deathDate" class="form-label">Passed Away</label>
                            <input type="date" id="deathDate" name="deathDate" class="form-input">
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label for="story" class="form-label">Memorial Story *</label>
                        <textarea id="story" name="story" class="form-textarea" placeholder="Share your favorite memories, their personality, and what made them special..." required style="min-height: 120px;"></textarea>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Pet Photos</label>
                        <div class="file-upload" onclick="document.getElementById('photos').click()">
                            <input type="file" id="photos" name="photos" accept="image/*" multiple>
                            <div class="file-upload-text">Click to select photos or drag and drop</div>
                            <div class="file-upload-hint">Upload multiple photos to create a gallery</div>
                        </div>
                        <div id="photoPreview" class="photo-gallery" style="margin-top: 20px;"></div>
                    </div>

                    <button type="submit" class="submit-btn" style="width: 100%; padding: 15px;">Create Memorial</button>
                </form>
            </div>
        </div>
    </section>

    <script>
        const form = document.getElementById('memorialForm');
        const photosInput = document.getElementById('photos');
        const photoPreview = document.getElementById('photoPreview');

        photosInput.addEventListener('change', function(e) {
            photoPreview.innerHTML = '';
            const files = Array.from(e.target.files);

            files.forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = document.createElement('img');
                        img.src = e.target.result;
                        img.className = 'gallery-image';
                        photoPreview.appendChild(img);
                    };
                    reader.readAsDataURL(file);
                }
            });
        });

        form.addEventListener('submit', async function(e) {
            e.preventDefault();

            const submitBtn = form.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Creating Memorial...';
            submitBtn.disabled = true;

            try {
                const formData = new FormData(form);

                const response = await fetch('/api/memorial', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                if (result.success) {
                    alert('Memorial created successfully!');
                    window.location.href = `/`;
                } else {
                    throw new Error('Failed to create memorial');
                }
            } catch (error) {
                console.error('Failed to create memorial:', error);
                alert('Failed to create memorial. Please try again.');
            } finally {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });

        // Drag and drop functionality
        const fileUpload = document.querySelector('.file-upload');

        fileUpload.addEventListener('dragover', function(e) {
            e.preventDefault();
            this.style.borderColor = '#6366f1';
            this.style.backgroundColor = '#f0f9ff';
        });

        fileUpload.addEventListener('dragleave', function(e) {
            e.preventDefault();
            this.style.borderColor = '#d1d5db';
            this.style.backgroundColor = '#f9fafb';
        });

        fileUpload.addEventListener('drop', function(e) {
            e.preventDefault();
            this.style.borderColor = '#d1d5db';
            this.style.backgroundColor = '#f9fafb';

            const files = e.dataTransfer.files;
            photosInput.files = files;
            photosInput.dispatchEvent(new Event('change'));
        });
    </script>
</body>
</html>